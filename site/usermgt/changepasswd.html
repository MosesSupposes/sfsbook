<html>
	<head>
		<script type="text/javascript" src="/js/example.js"></script>
		<link href="/css/style.css" rel="stylesheet">
	</head>
	<body>
		{{ template "header" . }}
		<!-- need to add a status bar -->
		<ul class="nav">
			<li class="categories"><a href="/index.html"><div class="arrow-left"></div>Back to Search</a></li>
			<li id="searchfield"><a href="#">Change your password</a></li>
		</ul>
		{{if .DecodedCookie.IsAuthed}}

		{{with .Results}}
		{{if .ChangeAttemptedAndSucceeded}}
		<p>Your password has been sucessfullly updated</p>
		{{else}} {{/* if .ChangeAttemptedAndSucceeded */}}

		{{if .ChangeAttemptedAndFailed}}
		<p>There was a problem: {{.ReasonForFailure}}. Try again?</p>
		{{end}}

		<form action="/usermgt/changepasswd.html" method="post" class="results">
			<h3>Change Password</h3>
			<div class="onefield">
				<label class="password-label">Current<br>password</label>
				<input class="password small-input" id="oldpassword" type="password" name="oldpassword" maxlength="30" ./>
			</div>

			<div class="onefield">
				<label class="password-label">New<br>password</label>
				<input class="password small-input" id="newpassword" type="password" name="newpassword" maxlength="30" ./>
			</div>
			<div class="onefield">
				<label class="password-label">Confirm new<br>password</label>
				<input class="password small-input" id="newpasswordagain" type="password" name="newpasswordagain" maxlength="30" ./>
			</div>

			<div class="buttonbar">
				<div class="button">
					<input type="submit" value="Save" />
				</div>
			</div>
		</form>
		{{end}} {{/* if .ChangeAttemptedAndSucceeded */}}
		{{end}} {{/* with .DecodedCookie */}}

		{{else}} {{/* if .DecodedCookie.IsAuthed */}}
		You aren't sign in. <a href="/login.html">Sign-in</a> before trying to change your password.
		{{end}} {{/* if .DecodedCookie.IsAuthed */}}
		{{ template "footer" . }}
	</body>
</html>
